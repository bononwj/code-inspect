"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const badgen_1 = __importDefault(require("badgen"));
const fs_1 = require("fs");
const fs_extra_1 = require("fs-extra");
const path_1 = require("path");
class default_1 {
    constructor(options) {
        this.options = options;
    }
    report(...args) {
        const [, statistic] = args;
        const badgeOptions = this.options.reportersOptions ? this.options.reportersOptions.badge || {} : {};
        const badge = badgen_1.default(Object.assign({ color: this.getColor(statistic), status: this.getStatus(statistic), subject: 'Copy/Paste' }, badgeOptions));
        fs_extra_1.ensureDirSync(this.options.output);
        fs_1.writeFileSync(badgeOptions.path ? badgeOptions.path : path_1.join(this.options.output, 'jscpd-badge.svg'), badge);
    }
    attach() {
    }
    getStatus(statistic) {
        return statistic ? statistic.total.percentage + '%' : 'N/A';
    }
    getColor(statistic) {
        if (!statistic || !statistic.hasOwnProperty('threshold')) {
            return 'grey';
        }
        return statistic.total.percentage < statistic.threshold ? 'green' : 'red';
    }
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBNEI7QUFDNUIsMkJBQW1DO0FBQ25DLHVDQUF5QztBQU16QywrQkFBNEI7QUFZNUI7SUFFRSxZQUFvQixPQUFpQjtRQUFqQixZQUFPLEdBQVAsT0FBTyxDQUFVO0lBQ3JDLENBQUM7SUFFTSxNQUFNLENBQUMsR0FBRyxJQUF1QjtRQUN0QyxNQUFNLENBQUMsRUFBRSxTQUFTLENBQUMsR0FBc0IsSUFBSSxDQUFDO1FBQzlDLE1BQU0sWUFBWSxHQUFrQixJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNuSCxNQUFNLEtBQUssR0FBRyxnQkFBTSxpQkFDbEIsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQy9CLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUNqQyxPQUFPLEVBQUUsWUFBWSxJQUNsQixZQUFZLEVBQ2YsQ0FBQztRQUNILHdCQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxrQkFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxpQkFBaUIsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzdHLENBQUM7SUFFTSxNQUFNO0lBQ2IsQ0FBQztJQUVNLFNBQVMsQ0FBQyxTQUFxQjtRQUNwQyxPQUFPLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUE7SUFDN0QsQ0FBQztJQUVNLFFBQVEsQ0FBQyxTQUFxQjtRQUNuQyxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN4RCxPQUFPLE1BQU0sQ0FBQztTQUNmO1FBQ0QsT0FBTyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUM1RSxDQUFDO0NBQ0Y7QUEvQkQsNEJBK0JDIn0=